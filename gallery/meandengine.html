<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>engine.lol</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <link rel="stylesheet" href="https://unpkg.com/reset-css@5.0.1/reset.css">
  <style type="text/css">*{box-sizing:border-box}body,html{scroll-behavior:smooth;font-family:"Courier New"}.wrapper{position:absolute;width:100vw;height:100vh;top:0;left:0;text-align:center;display:flex;justify-content:center;vertical-align:center;align-content:center;align-items:center;flex-wrap:wrap}.engine-controls{width:100%;margin:1em 0}.engine-controls button{font-size:.7em;padding:.5em 2em;border-radius:16px}#e-play,body{-webkit-transition:background .15s linear;-moz-transition:background .15s linear;-ms-transition:background .15s linear;-o-transition:background .15s linear;transition:background .15s linear}textarea{resize:none;padding:.75em;font-size:1.75em;line-height:97.5%}.window{position:relative;background:#f7f7f7;box-shadow:0 0 100px #717374;border:1.5px solid #000;outline:1px solid #f7f7f7;width:100%;border-radius:15px;min-height:30vh;display:flex;justify-content:center;vertical-align:middle;align-items:center;flex-wrap:wrap;margin:2.5vh 5vw}h2{width:100%;display:block;border-bottom:1.5px solid #000;font-family:"Times New Roman";font-size:1.75em;letter-spacing:-.3px;padding:.5em 0}h2 span{padding:0 .25em}#audio-player-controller{position:fixed;padding:1em;z-index:20;top:0;width:100%;text-align:center;mix-blend-mode:difference;display:none}#audio-player-controller h3{display:inline-block;padding:.2em .5em;width:200px;height:35px;line-height:30px;border:1px solid #f7f7f7;margin:0 auto;border-radius:16px;color:#f7f7f7}#audio-player-controller button{background:0 0;border:0;outline:0;margin:0 .5em;transform:translateY(-8px);padding:.5em}#audio-player-controller button:hover{text-shadow:0 0 5px #f7f7f7}button{border:1.5px solid #000;border-radius:12px;background:#000;color:#f7f7f7;padding:.5em 1em;margin:.5em;font-family:"Courier New";-webkit-transition:all .19s cubic-bezier(.17, .67, .83, .67);transition:all .19s cubic-bezier(.17, .67, .83, .67)}button:hover{transform:translateY(-2.5px);color:#f7f7f7;background:#1c1e1f;cursor:pointer;box-shadow:0 0 20px #3b4041}#downloader{position:absolute;overflow:hidden;width:1px;height:1px;white-space:pre!important;display:inline-block;pointer-events:none!important;opacity:0!important}body{background:#717374;padding:2em;display:flex;flex-wrap:wrap;justify-content:center}#e-play{display:block;position:relative;background:#000;border:1px solid #fff;outline:1.5px solid #000000;width:512px;height:512px;margin:0;overflow:hidden}#e-cartridge .obj,#e-play .obj{position:absolute;display:inline-block;left:0;top:0;width:128px;height:128px;mix-blend-mode:exclusion;-webkit-user-drag:none;-khtml-user-drag:none;-moz-user-drag:none;-o-user-drag:none;user-drag:none}#play{outline:1.25px solid #fff;background:#000;position:relative;width:512px;animation:pulse-engine 5s infinite;overflow:hidden;margin:auto;-webkit-transition:all .3s linear;transition:all .13s linear}#play .play-overlay{position:absolute;pointer-events:none;width:100%;height:100%;z-index:9}#play #e-cartridge{position:absolute;width:512px;height:512px;bottom:0;z-index:15}#play #e-text{position:absolute;top:0;z-index:15;pointer-events:none}#play #e-text textarea{resize:none!important;pointer-events:none!important}#play #e-controls{position:absolute;width:512px;height:512px;z-index:12;bottom:0}#play #e-controls a{position:absolute;display:inline-block;background:#fff;opacity:.3;background-blend-mode:blur(3px);-webkit-transition:all .19s cubic-bezier(.17, .67, .83, .67);transition:all .19s cubic-bezier(.17, .67, .83, .67)}#play #e-controls a.___n,#play #e-controls a.___s{width:100%;height:24px}#play #e-controls a.___e,#play #e-controls a.___w{width:24px;height:512px}#play #e-controls a.___e{right:0}#play #e-controls a.___w{left:0}#play #e-controls a.___s{bottom:0;left:0}#play #e-controls a.___n{top:0;left:0}#play #e-controls a.-inaccessible{opacity:.05}#play #e-controls a:hover{transform:scale(1.04);mix-blend-mode:difference;cursor:pointer;opacity:.8}#play #e-controls a.-inaccessible:hover{opacity:.1;cursor:not-allowed}#play h2{color:#fff;border-bottom:1px solid #fff}#e-text{background:0 0;position:absolute;height:512px;width:512px;top:0;left:0;mix-blend-mode:difference;z-index:999;pointer-events:none}#e-text textarea{padding:.75em;width:100%;height:100%;background:rgba(0,0,0,0);color:#fff;font-family:"Times New Roman";mix-blend-mode:exclusion;white-space:pre-wrap;overflow-y:hidden;resize:none!important}#cartridge{display:none}@keyframes pulse-engine{0%{box-shadow:0 0 0 5px rgba(0,0,0,.3)}70%{box-shadow:0 0 0 20px transparent}100%{box-shadow:0 0 0 5px transparent}}
  </style>
</head>

<body>
  
  <div class="wrapper">
    
    
  <div id="audio-player-controller">
    <h3>
      <marquee class="_audiotitle" onmouseover="this.stop();" onmouseout="this.start();">
        If there's a song, it's going to play here...
      </marquee>
    </h3>

    <button id="btn-audio-play">play</button>
    <button id="btn-audio-stop">stop</button>

    <audio id="_audio">
      <source src="" id="_audio_src">
    </audio>
  </div>
    
  <div class="window" tabindex="-1" id="play">
    <div class="play-overlay" style="background-image:url(https://engine.lol/alpha/assets/fx-scanline.gif);mix-blend-mode: multiply;opacity: 0.1;"></div>

    <h2>Corrupted or empty game</h2>

    <!-- THE 'START SCREEN' FOR GAMES   -->

    <div id="e-cartridge">
    </div>

    <div id="e-controls">
      <a data-direction="n" data-target="null" class="___n -inaccessible"></a>
      <a data-direction="e" data-target="null" class="___e -inaccessible"></a>
      <a data-direction="w" data-target="null" class="___w -inaccessible"></a>
      <a data-direction="s" data-target="null" class="___s -inaccessible"></a>
    </div>
    

        

    <!--  PLAY AREA GOES HERE  -->
    <div id="e-play">
      
    <div id="e-text">
      <textarea maxlength="550"></textarea>
    </div>

    </div>


  </div>
    
    
    <!--  CONTROLS  -->
    <div class="engine-controls">
      <button id="btn-play" onclick="location.reload()">Reload</button>  
      <button id="btn-code" onclick="getcode()">Get Code</button>  
    </div>
  </div>
  
  
  <div id="cartridge">{
  "scene_count": 1,
  "start_scene": {
    "x": 0,
    "y": 0
  },
  "cartridge": null,
  "audio": "ambient-3.m4a",
  "audio_loop": true,
  "font": "default",
  "s": [
    {
      "x": 0,
      "y": 0,
      "active": true,
      "color": "#000000",
      "textoverlay": "\n\n\n       Hello everyone, I'm Chia.\n\n\n\n\n      (this is me, i should wear my\n      glasses more often)",
      "object_count": 1,
      "objects": [
        {
          "x": 240,
          "y": 160,
          "img": "https://engine.lol/alpha/assets/image/faces/nerd.gif",
          "filter": "none",
          "flip": "none",
          "size": "72px"
        }
      ]
    },
    {
      "x": 0,
      "y": 1,
      "active": true,
      "color": "#000000",
      "textoverlay": "\n\n\n     All my life I've been in love\n     with tools that allowed me to make\n     worlds of my own.",
      "object_count": 4,
      "objects": [
        {
          "x": 360,
          "y": 0,
          "img": "https://engine.lol/alpha/assets/image/clouds/5.gif",
          "filter": "none",
          "flip": "none",
          "size": "128px"
        },
        {
          "x": 0,
          "y": 160,
          "img": "https://engine.lol/alpha/assets/image/clouds/3.gif",
          "filter": "none",
          "flip": "none",
          "size": "128px"
        },
        {
          "x": 320,
          "y": 280,
          "img": "https://engine.lol/alpha/assets/image/clouds/2.gif",
          "filter": "none",
          "flip": "none",
          "size": "128px"
        },
        {
          "x": 40,
          "y": 360,
          "img": "https://engine.lol/alpha/assets/image/clouds/5.gif",
          "filter": "none",
          "flip": "none",
          "size": "128px"
        }
      ]
    },
    {
      "x": 0,
      "y": 2,
      "active": true,
      "color": "#000000",
      "textoverlay": "\n\n\n       This started with pen and paper.\n    \n\n       (I hope many of you can relate...)",
      "object_count": 1,
      "objects": [
        {
          "x": 200,
          "y": 240,
          "img": "https://engine.lol/alpha/assets/image/items/note.gif",
          "filter": "none",
          "flip": "none",
          "size": "128px"
        }
      ]
    },
    {
      "x": 0,
      "y": 3,
      "active": true,
      "color": "#000000",
      "textoverlay": "\n\n\n      I would fill in short notebooks\n      with original epics and fanfiction.\n\n\n      As a kid, I used to recite these and\n      act them out proudly.",
      "object_count": 5,
      "objects": [
        {
          "x": 320,
          "y": 280,
          "img": "https://engine.lol/alpha/assets/image/faces/joy.gif",
          "filter": "none",
          "flip": "none",
          "size": "128px"
        },
        {
          "x": 280,
          "y": 360,
          "img": "https://engine.lol/alpha/assets/image/items/note.gif",
          "filter": "invert(1)",
          "flip": "none",
          "size": "72px"
        },
        {
          "x": 0,
          "y": 200,
          "img": "https://engine.lol/alpha/assets/image/monsters/ghost.gif",
          "filter": "none",
          "flip": "none",
          "size": "250px"
        },
        {
          "x": 120,
          "y": 360,
          "img": "https://engine.lol/alpha/assets/image/monsters/child.gif",
          "filter": "none",
          "flip": "none",
          "size": "128px"
        },
        {
          "x": 400,
          "y": 40,
          "img": "https://engine.lol/alpha/assets/image/environment/moon-3.gif",
          "filter": "none",
          "flip": "none",
          "size": "72px"
        }
      ]
    },
    {
      "x": 0,
      "y": 4,
      "active": true,
      "color": "#000000",
      "textoverlay": "\n\n\n       Somewhere very early on\n      (perhaps too early...) I discovered\n      the internet.\n\n\n\n\n\n            digg                        livejournal\n\n                            y8     myspace\n        Neopets            lemonparty...\n           farmtown &amp; pet society",
      "object_count": 4,
      "objects": [
        {
          "x": 160,
          "y": 200,
          "img": "https://engine.lol/alpha/assets/image/faces/sad.gif",
          "filter": "none",
          "flip": "none",
          "size": "96px"
        },
        {
          "x": 240,
          "y": 200,
          "img": "https://engine.lol/alpha/assets/image/faces/joy.gif",
          "filter": "none",
          "flip": "none",
          "size": "96px"
        },
        {
          "x": 400,
          "y": 360,
          "img": "https://engine.lol/alpha/assets/image/digital/pointer.gif",
          "filter": "none",
          "flip": "none",
          "size": "54px"
        },
        {
          "x": 40,
          "y": 240,
          "img": "https://engine.lol/alpha/assets/image/digital/computer.gif",
          "filter": "none",
          "flip": "none",
          "size": "128px"
        }
      ]
    },
    null,
    null,
    null,
    null,
    {
      "x": 1,
      "y": 4,
      "active": true,
      "color": "#000000",
      "textoverlay": "\n        * I coded my own websites\n           for my Neopets and customized\n           my Myspace profile.\n\n        * I made flash games &amp; got\n           trashtalked on Newgrounds.\n\n        * I roleplayed on Pokemon forums\n           and made my own sites with\n           graphic design resources and\n           image mapped ripped tilesets.\n\n        * I made RPG Maker XP games\n           and fake 'viruses' on Notepad.",
      "object_count": 7,
      "objects": [
        {
          "x": 40,
          "y": 40,
          "img": "https://engine.lol/alpha/assets/image/softbank/19.gif",
          "filter": "none",
          "flip": "none",
          "size": "54px"
        },
        {
          "x": 400,
          "y": 400,
          "img": "https://engine.lol/alpha/assets/image/softbank/9.gif",
          "filter": "none",
          "flip": "none",
          "size": "54px"
        },
        {
          "x": 0,
          "y": 280,
          "img": "https://engine.lol/alpha/assets/image/softbank/31.gif",
          "filter": "none",
          "flip": "none",
          "size": "72px"
        },
        {
          "x": 400,
          "y": 120,
          "img": "https://engine.lol/alpha/assets/image/softbank/32.gif",
          "filter": "none",
          "flip": "none",
          "size": "54px"
        },
        {
          "x": 0,
          "y": 80,
          "img": "https://engine.lol/alpha/assets/image/clouds/5.gif",
          "filter": "none",
          "flip": "none",
          "size": "128px"
        },
        {
          "x": 40,
          "y": 440,
          "img": "https://engine.lol/alpha/assets/image/clouds/4.gif",
          "filter": "none",
          "flip": "none",
          "size": "72px"
        },
        {
          "x": 400,
          "y": 280,
          "img": "https://engine.lol/alpha/assets/image/clouds/2.gif",
          "filter": "none",
          "flip": "none",
          "size": "72px"
        }
      ]
    },
    {
      "x": 2,
      "y": 0,
      "active": true,
      "color": "#000000",
      "textoverlay": "\n\n     because whether we make a poorly-\n     coded browser- based game engine \n     that is a game in itself, an art piece,\n     or mouth a story\n\n",
      "object_count": 3,
      "objects": [
        {
          "x": 240,
          "y": 240,
          "img": "https://engine.lol/alpha/assets/image/digital/package.gif",
          "filter": "none",
          "flip": "none",
          "size": "72px"
        },
        {
          "x": 120,
          "y": 320,
          "img": "https://engine.lol/alpha/assets/image/digital/computer.gif",
          "filter": "none",
          "flip": "none",
          "size": "72px"
        },
        {
          "x": 360,
          "y": 280,
          "img": "https://engine.lol/alpha/assets/image/digital/pointer.gif",
          "filter": "none",
          "flip": "none",
          "size": "54px"
        }
      ]
    },
    {
      "x": 2,
      "y": 1,
      "active": true,
      "color": "#000000",
      "textoverlay": "\n\n   they're all acts of giving a world\n   to someone: a new sense of agency,\n   understanding, meaning\n\n\n\n       and everything shaped around us\n       was once someone's life work,\n       a result of imagining a world we\n       could live in with that thing extant,\n       made real...\n\n\n   ",
      "object_count": 1,
      "objects": [
        {
          "x": 200,
          "y": 360,
          "img": "https://engine.lol/alpha/assets/image/digital/cursor.gif",
          "filter": "none",
          "flip": "none",
          "size": "72px"
        }
      ]
    },
    {
      "x": 2,
      "y": 2,
      "active": true,
      "color": "#000000",
      "textoverlay": "\n\n\n        i hope you get to make\n        something new\n\n\n\n\n                           love, chia\n",
      "object_count": 4,
      "objects": [
        {
          "x": 0,
          "y": 0,
          "img": "https://engine.lol/alpha/assets/image/clouds/5.gif",
          "filter": "none",
          "flip": "none",
          "size": "128px"
        },
        {
          "x": 320,
          "y": 280,
          "img": "https://engine.lol/alpha/assets/image/clouds/5.gif",
          "filter": "none",
          "flip": "none",
          "size": "128px"
        },
        {
          "x": 40,
          "y": 160,
          "img": "https://engine.lol/alpha/assets/image/clouds/4.gif",
          "filter": "none",
          "flip": "none",
          "size": "128px"
        },
        {
          "x": 360,
          "y": 80,
          "img": "https://engine.lol/alpha/assets/image/clouds/2.gif",
          "filter": "none",
          "flip": "none",
          "size": "128px"
        }
      ]
    },
    null,
    {
      "x": 2,
      "y": 4,
      "active": true,
      "color": "#000000",
      "textoverlay": "\n\n\n         I like the old days\n         of creatingâ€”\n\n\n\n                  in a difficult environment,\n                  I felt I could be my most\n                  authentic self through these\n                  different places online.\n\n     (which is not what a lot of people\n      feel... it's surprising to me, but also\n     not really...)\n",
      "object_count": 3,
      "objects": [
        {
          "x": 280,
          "y": 40,
          "img": "https://engine.lol/alpha/assets/image/digital/computer-2.gif",
          "filter": "none",
          "flip": "none",
          "size": "128px"
        },
        {
          "x": 40,
          "y": 240,
          "img": "https://engine.lol/alpha/assets/image/digital/exclamation.gif",
          "filter": "none",
          "flip": "none",
          "size": "72px"
        },
        {
          "x": 360,
          "y": 120,
          "img": "https://engine.lol/alpha/assets/image/digital/cursor.gif",
          "filter": "invert(1)",
          "flip": "none",
          "size": "72px"
        }
      ]
    },
    {
      "x": 3,
      "y": 0,
      "active": true,
      "color": "#000000",
      "textoverlay": "\n\n    i can tell you all about my love\n    for 'tools' and making things possible\n    for other people, but the best\n    way to feel that is to use thisâ€”\n   \n\n    this website that i made with my\n    hands from scratch (&amp; stackoverflow)\n\n    and see if it can bring you to make\n    something too...",
      "object_count": 0,
      "objects": []
    },
    null,
    null,
    null,
    {
      "x": 3,
      "y": 4,
      "active": true,
      "color": "#000000",
      "textoverlay": "\n\n\n         I like the old days\n         of creatingâ€”\n\n\n\n                  in a difficult environment,\n                  I could shape the worlds\n                  and spaces that I needed\n                  for myself.\n\n                          (I guess it's an escape\n                            through creation.)",
      "object_count": 5,
      "objects": [
        {
          "x": 360,
          "y": 120,
          "img": "https://engine.lol/alpha/assets/image/digital/pointer.gif",
          "filter": "invert(1)",
          "flip": "none",
          "size": "72px"
        },
        {
          "x": 320,
          "y": 40,
          "img": "https://engine.lol/alpha/assets/image/environment/moon-3.gif",
          "filter": "none",
          "flip": "none",
          "size": "128px"
        },
        {
          "x": 40,
          "y": 200,
          "img": "https://engine.lol/alpha/assets/image/chat/chat-line.gif",
          "filter": "none",
          "flip": "none",
          "size": "72px"
        },
        {
          "x": 40,
          "y": 320,
          "img": "https://engine.lol/alpha/assets/image/chat/chat-exclaim.gif",
          "filter": "invert(1)",
          "flip": "none",
          "size": "54px"
        },
        {
          "x": 120,
          "y": 400,
          "img": "https://engine.lol/alpha/assets/image/chat/chat.gif",
          "filter": "invert(1)",
          "flip": "none",
          "size": "54px"
        }
      ]
    },
    {
      "x": 4,
      "y": 0,
      "active": true,
      "color": "#000000",
      "textoverlay": "\n        I think Engine was very\n        technically interesting\n        for me to make, too...\n\n       \n        I want to spend my life making\n        it possible for others to create.\n        \n        I want tools and the web to\n        work for us and be shaped by us.",
      "object_count": 2,
      "objects": [
        {
          "x": 200,
          "y": 360,
          "img": "https://engine.lol/alpha/assets/image/faces/joy.gif",
          "filter": "none",
          "flip": "none",
          "size": "105.469px"
        },
        {
          "x": 120,
          "y": 360,
          "img": "https://engine.lol/alpha/assets/image/digital/computer.gif",
          "filter": "none",
          "flip": "none",
          "size": "54px"
        }
      ]
    },
    {
      "x": 4,
      "y": 1,
      "active": true,
      "color": "#000000",
      "textoverlay": "\n        I think Engine was very\n        technically interesting\n        for me to make, too...\n\n        I don't want Engine to die\n        like Flash did. I like code\n        to be legible... (it's really amateur\n        but heyâ€”at least it's open)\n",
      "object_count": 0,
      "objects": []
    },
    {
      "x": 4,
      "y": 2,
      "active": true,
      "color": "#000000",
      "textoverlay": "\n\n        It combines a lot of my\n        recent loves, too:\n\n\n            * maps and cartography\n           (and how to 'shape' the web)\n\n           * a comfort in being terrible\n           at things (i think this is how i\n           was so prolific when i was younger\n           ...everything is too clean)\n\n           * sound as a site for memory\n           (with very bad ambient tracks)",
      "object_count": 3,
      "objects": [
        {
          "x": 40,
          "y": 160,
          "img": "https://engine.lol/alpha/assets/image/items/magnify.gif",
          "filter": "none",
          "flip": "none",
          "size": "54px"
        },
        {
          "x": 40,
          "y": 240,
          "img": "https://engine.lol/alpha/assets/image/items/megaphone.gif",
          "filter": "invert(1)",
          "flip": "none",
          "size": "54px"
        },
        {
          "x": 40,
          "y": 360,
          "img": "https://engine.lol/alpha/assets/image/digital/exclamation.gif",
          "filter": "none",
          "flip": "none",
          "size": "54px"
        }
      ]
    },
    {
      "x": 4,
      "y": 3,
      "active": true,
      "color": "#000000",
      "textoverlay": "      .                  *            .            .\n\n        +      *                                *\n                              +      *            \n                  .                              .\n+            ~\n\n\n              engine (lol!!!) is a little\n              tool that is an ode to the\n              early web (in case you haven't\n              guessed) and to toolsmaking",
      "object_count": 2,
      "objects": [
        {
          "x": 320,
          "y": 360,
          "img": "https://engine.lol/alpha/assets/image/digital/pointer.gif",
          "filter": "none",
          "flip": "none",
          "size": "72px"
        },
        {
          "x": 200,
          "y": 120,
          "img": "https://engine.lol/alpha/assets/image/items/frame.gif",
          "filter": "none",
          "flip": "none",
          "size": "72px"
        }
      ]
    },
    {
      "x": 4,
      "y": 4,
      "active": true,
      "color": "#000000",
      "textoverlay": "\n\n\n       Lately I've been thinking about\n                how all of this love for the\n                internet is really about \n                how I've always gathered\n                people with me there.\n\n\n                And this sense of magic &amp;\n                agency was made possible\n                because of my relationship\n                to creation and making.",
      "object_count": 3,
      "objects": [
        {
          "x": 40,
          "y": 160,
          "img": "https://engine.lol/alpha/assets/image/digital/paint.gif",
          "filter": "none",
          "flip": "none",
          "size": "72px"
        },
        {
          "x": 40,
          "y": 320,
          "img": "https://engine.lol/alpha/assets/image/items/heart.gif",
          "filter": "invert(1)",
          "flip": "none",
          "size": "72px"
        },
        {
          "x": 40,
          "y": 400,
          "img": "https://engine.lol/alpha/assets/image/items/heart-half.gif",
          "filter": "invert(1)",
          "flip": "none",
          "size": "72px"
        }
      ]
    }
  ]
}</div>
  <div id="downloader"></div>
  
  <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
  <script type="text/javascript">console.log("loaded engine.js, Engine's playmode");const cartridge=$("#cartridge").text();var scenes=null,globals={MAX_object_count:15,MAP_width:5,MAP_height:5},arrow_keys_handler=function(e){switch(e.code){case"ArrowUp":case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"Space":e.preventDefault()}};if(window.addEventListener("keydown",arrow_keys_handler,!1),!testJSON(cartridge))throw $("#play h2").text("Corrupted or empty game"),new Error;if(!(scenes=JSON.parse(cartridge)))throw $("#play h2").text("Corrupted or empty game"),new Error;function testJSON(e){if("string"!=typeof e)return!1;try{return"object"==typeof JSON.parse(e)}catch(e){return!1}}$("#play h2").text("Engine"),console.log("Loaded: ",scenes),scenes.s.length!==globals.MAP_height*globals.MAP_width&&(console.log("This cartridge is sized differently. Adjusting the player..."),globals.MAP_width=Math.sqrt(scenes.s.length),globals.MAP_height=Math.sqrt(scenes.s.length)),$("#play h2").text("Engine"),setTimeout(function(){$("#play").focus(),Tplayer.init()},1500);const c={getSceneIndex:function(e,a){return parseInt(e)*globals.MAP_width+parseInt(a)},getScene:function(e,a){let t=parseInt(e)*globals.MAP_width+parseInt(a);return scenes.s[t]},textConvert:function(e){return e.replace(/\\n/g,"\n").replace(/&nbsp;/g," ")}},Tplayer={active:scenes.s[0],init:function(){Tplayer.clearGame(),null!==scenes.cartridge?(Tplayer.loadCartridge(),$("#e-cartridge").fadeIn(1e3),setTimeout(function(){$("#e-cartridge").fadeOut("slow"),$("#play h2").html("<span>Playing</span><span class='_playwhatscene'></span> "),"default"!==scenes.font&&$("#e-play textarea").css("font-family",scenes.font),$("._playwhatscene").text(Tplayer.active.x+","+Tplayer.active.y)},1800)):($("#e-cartridge").fadeOut(),$("#play").css("pointer-events","auto").css("cursor","auto")),$("#play").css("cursor","not-allowed").css("pointer-events","none").delay(1500).css("pointer-events","auto").css("cursor","auto"),Tplayer.loadPlay(scenes.start_scene.x,scenes.start_scene.y)},loadCartridge:function(){$("#play h2").text("Starting game..."),Tplayer.loadObjects(scenes.cartridge.objects,"#e-cartridge"),$("#e-cartridge").css("background",scenes.cartridge.color),$("body").css("background",scenes.cartridge.color)},loadPlay:function(e,a){$("#play h2").html("<span>Starting Game...</span>").fadeIn("slow"),Tplayer.active=scenes.s[c.getSceneIndex(e,a)],null!==scenes.audio&&($("#audio-player-controller").fadeIn(),Tplayer.playSong()),setTimeout(function(){$("#play h2").html("<span>Play</span><span class='_playwhatscene'></span> "),$("._playwhatscene").text(Tplayer.active.x+","+Tplayer.active.y),Tplayer.loadScene(e,a),"default"!==scenes.font&&$("#e-play textarea").css("font-family",scenes.font)},1500)},clearGame:function(){$("#e-cartridge").html(""),$("#e-controls a").each(function(e,a){$(this).removeClass("-inaccessible").addClass("-inaccessible").attr("data-target","null").unbind("click",Tplayer.loadTarget)}),Tplayer.clearScene()},playSong:function(e){let a=null;a=e||"https://engine.lol/alpha/assets/audio/"+scenes.audio,$("#_audio")[0].currentTime=0,$("._audiotitle").text(a),$("#_audio").attr("src",a),$("#_audio")[0].play()},loadTarget:function(){let e=$(this).attr("data-target"),a=e.split(",")[0],t=e.split(",")[1];null!=a&&null!=t&&(Tplayer.loadScene(a,t),Tplayer.animatePulse())},animatePulse:function(){let e=$("#play");e.css("transform","scale(1.03)"),setTimeout(function(){e.css("transform","scale(0.99)")},500)},updateSceneNavigation(){$("#play").off("keydown"),$("#e-controls a").each(function(e,a){$(this).removeClass("-inaccessible").attr("data-target","null").unbind("click",Tplayer.loadTarget);var t=$(this).data("direction"),n=Tplayer.convertCoord(t,Tplayer.active.x,Tplayer.active.y);if(null!=n){let e=n.toString().split(",");if(null==c.getScene(e[0],e[1]))return void $(this).addClass("-inaccessible");$(this).attr("data-target",e[0]+","+e[1]).bind("click",Tplayer.loadTarget),$("#play").on("keydown",function(a){(38==a.keyCode&&"n"==t||39==a.keyCode&&"e"==t||37==a.keyCode&&"w"==t||40==a.keyCode&&"s"==t)&&Tplayer.loadScene(e[0],e[1])})}else $(this).addClass("-inaccessible")})},convertCoord:function(e,a,t){let n,l;switch(e){case"n":n=a>0?a-1:null,l=t;break;case"e":l=t<globals.MAP_width-1?t+1:null,n=a;break;case"w":l=t>0?t-1:null,n=a;break;case"s":n=a<globals.MAP_height-1?a+1:null,l=t}return null==n||null==l?null:[n+","+l]},loadScene:function(e,a){Tplayer.clearScene(),Tplayer.active=c.getScene(e,a),$("#e-play textarea").hide().delay(700).fadeIn("slow").val(c.textConvert(Tplayer.active.textoverlay)),Tplayer.loadObjects(Tplayer.active.objects,"#e-play"),$("._playwhatscene").text(Tplayer.active.x+","+Tplayer.active.y),Tplayer.loadColor(),Tplayer.updateSceneNavigation()},loadObjects:function(e,a){e.forEach(function(e){let t="";t="<img class='obj' data-selected='0' src='"+e.img+"' style='",t+="top:"+e.y+"px; left:"+e.x+"px;",e.filter&&(t+="filter:"+e.filter+";"),e.flip&&(t+="transform:"+e.flip+";"),e.size&&(t+="width:"+e.size+"; height:"+e.size+";"),t+="'>";let n=$(t).hide().fadeIn(500);$(a).append(n)})},loadColor:function(){let e=Tplayer.active.color;0==e&&(e="#000000"),$("#e-play").css("background",e),$("body").css("background",e)},clearScene:function(){$("#e-text textarea").val(""),$("#e-play img.obj").each(function(){$(this).remove()})}};function getcode(){var e=JSON.stringify(scenes);console.log(e),$("#downloader").html(e);var a=document.createRange();a.selectNode(document.getElementById("downloader")),window.getSelection().removeAllRanges(),window.getSelection().addRange(a),document.execCommand("copy"),window.getSelection().removeAllRanges(),alert("Copied cartridge code to clipboard! Note that if you have funky characters or if my code was just inadequate, this might have failed... :(\nYou can play this in the 'Load Cartridge' page.")}
</script>
  
  
</body>